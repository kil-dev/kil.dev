/* Custom utilities */
@utility blur-2xs {
  filter: blur(2px);
}

@utility backdrop-blur-2xs {
  -webkit-backdrop-filter: blur(2px);
  backdrop-filter: blur(2px);
}

@utility card-back-shadow {
  filter: var(--card-back-shadow);
}

/* Achievement popup 3D helpers */
@utility transform-3d {
  transform-style: preserve-3d;
}

@utility backface-hidden {
  backface-visibility: hidden;
}

@utility perspective-near {
  perspective: 800px;
}

@utility rotate-x-0 {
  transform: rotateX(0deg);
}

@utility rotate-x-180 {
  transform: rotateX(180deg);
}

/* Hide scrollbar utility for scrollable containers */
@utility no-scrollbar {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}
.no-scrollbar::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

/* Theme Toggle overlay spin animation */
@keyframes kd-spin-trail {
  0% {
    transform: rotate(0deg) scale(1);
    filter: drop-shadow(0 0 0 rgba(0, 0, 0, 0));
  }
  70% {
    transform: rotate(320deg) scale(1.1);
    filter: drop-shadow(0 0 0 rgba(0, 0, 0, 0))
      drop-shadow(0 0 6px color-mix(in oklch, var(--primary) 70%, transparent))
      drop-shadow(0 0 12px color-mix(in oklch, var(--accent, var(--primary)) 50%, transparent));
  }
  100% {
    transform: rotate(360deg) scale(1);
    filter: drop-shadow(0 0 0 rgba(0, 0, 0, 0));
  }
}

.theme-system-overlay-anim {
  animation: kd-spin-trail 260ms ease-out;
  will-change: transform, filter;
}
